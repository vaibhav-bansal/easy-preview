<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Easy Preview - Responsive Viewport Previewer</title>
  <meta name="description" content="Preview any URL in specific device viewports. Perfect for testing Figma prototypes, localhost, and production sites across different screen sizes.">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Roboto+Mono:wght@400&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS 4.1 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f3e8ff',
              100: '#e9d5ff',
              500: '#6750a4',
              600: '#5b45a0',
              700: '#4f3a94',
            },
            surface: {
              dark: '#121212',
              'dark-2': '#1e1e1e',
              'dark-3': '#2d2d2d',
            }
          },
          fontFamily: {
            sans: ['Roboto', 'sans-serif'],
            mono: ['Roboto Mono', 'monospace'],
          }
        }
      }
    }
  </script>
  
  <style>
    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #2d2d2d; }
    ::-webkit-scrollbar-thumb { background: #404040; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #555; }
    
    /* Input focus states */
    input:focus, select:focus {
      outline: none;
      border-color: #6750a4;
      box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.3);
    }
    
    /* Button hover */
    .btn-icon:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    .btn-icon:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* Resize handles */
    .resize-handle {
      position: absolute;
      background-color: transparent;
      z-index: 10;
    }
    
    .resize-handle:hover {
      background-color: rgba(103, 80, 164, 0.3);
    }
    
    .resize-handle.active {
      background-color: rgba(103, 80, 164, 0.5);
    }
    
    /* Corner handles */
    .resize-handle-bottom-right,
    .resize-handle-top-left,
    .resize-handle-top-right,
    .resize-handle-bottom-left {
      width: 16px;
      height: 16px;
      border-radius: 50%;
    }
    
    .resize-handle-bottom-right {
      bottom: -8px;
      right: -8px;
      cursor: nwse-resize;
    }
    
    .resize-handle-top-left {
      top: -8px;
      left: -8px;
      cursor: nwse-resize;
    }
    
    .resize-handle-top-right {
      top: -8px;
      right: -8px;
      cursor: nesw-resize;
    }
    
    .resize-handle-bottom-left {
      bottom: -8px;
      left: -8px;
      cursor: nesw-resize;
    }
    
    /* Edge handles */
    .resize-handle-right,
    .resize-handle-left {
      width: 8px;
      top: 0;
      bottom: 0;
      cursor: ew-resize;
    }
    
    .resize-handle-right {
      right: -4px;
    }
    
    .resize-handle-left {
      left: -4px;
    }
    
    .resize-handle-top,
    .resize-handle-bottom {
      height: 8px;
      left: 0;
      right: 0;
      cursor: ns-resize;
    }
    
    .resize-handle-top {
      top: -4px;
    }
    
    .resize-handle-bottom {
      bottom: -4px;
    }
    
    /* Prevent selection during resize */
    .resizing {
      user-select: none;
    }
    
    .resizing * {
      user-select: none;
      pointer-events: none;
    }
    
    .resizing .resize-handle {
      pointer-events: auto;
    }
  </style>
</head>
<body class="bg-surface-dark text-white font-sans h-screen flex flex-col overflow-hidden">
  
  <!-- Header -->
  <header class="flex items-center justify-between px-6 py-3 bg-surface-dark-2 border-b border-gray-700 shrink-0">
    <div class="flex items-center gap-3">
      <span class="text-primary-500 w-8 h-8 inline-flex items-center justify-center" id="header-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-full h-full">
          <rect x="4" y="2" width="16" height="20" rx="2" ry="2"/>
          <line x1="12" y1="18" x2="12.01" y2="18"/>
        </svg>
      </span>
      <h1 class="text-xl font-medium">Easy Preview</h1>
    </div>
    
    <div class="flex items-center gap-2">
      <!-- GitHub Link -->
      <a href="https://github.com/vaibhav-bansal/easy-preview" 
         target="_blank" 
         rel="noopener noreferrer"
         title="View on GitHub"
         class="btn-icon p-2 rounded-full transition-colors">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
          <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
        </svg>
      </a>
      
      <!-- Feedback Button -->
      <button id="feedback-button" 
              title="Send Feedback" 
              class="btn-icon p-2 rounded-full transition-colors"
              disabled>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
          <path d="M13 8H7"/>
          <path d="M17 12H7"/>
        </svg>
      </button>
      
      <!-- Theme Toggle -->
      <button id="theme-toggle" 
              title="System Theme" 
              class="btn-icon p-2 rounded-full transition-colors hover:bg-white/10"
              aria-label="System Theme">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 2v20M12 2a10 10 0 0 1 10 10M12 2a10 10 0 0 0-10 10"/>
        </svg>
      </button>
    </div>
  </header>
  
  <!-- Toolbar -->
  <div class="flex flex-wrap items-center gap-4 px-6 py-4 bg-surface-dark-2 border-b border-gray-700 shrink-0">
    <!-- URL Input Section -->
    <div class="flex items-center gap-3 flex-1 min-w-[300px]">
      <input 
        type="url" 
        id="url-input"
        placeholder="Enter URL (e.g., https://figma.com/proto/...)"
        class="flex-1 px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 text-sm"
      >
      
      <button id="load-button" 
              class="flex items-center gap-2 px-5 py-2.5 bg-primary-500 hover:bg-primary-600 text-white rounded-lg font-medium transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
          <polygon points="5 3 19 12 5 21 5 3"/>
        </svg>
        Load
      </button>
    </div>
    
    <!-- Device Selection Section -->
    <div class="flex items-center gap-4">
      <select id="device-select" 
              class="px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white text-sm min-w-[200px] cursor-pointer">
        <!-- Options populated by JavaScript -->
      </select>
      
      <!-- Dimension Inputs -->
      <div class="flex items-center gap-2">
        <label class="text-gray-400 text-sm">W</label>
        <input 
          type="number" 
          id="width-input"
          min="200"
          max="3840"
          value="440"
          class="w-20 px-3 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white text-sm text-center"
        >
        
        <span class="text-gray-400">×</span>
        
        <label class="text-gray-400 text-sm">H</label>
        <input 
          type="number" 
          id="height-input"
          min="300"
          max="2160"
          value="956"
          class="w-20 px-3 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white text-sm text-center"
        >
      </div>
      
      <!-- Action Buttons -->
      <div class="flex items-center gap-2">
        <button id="orientation-button" 
                title="Toggle Orientation"
                class="btn-icon p-2 rounded-full transition-colors hover:bg-white/10">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
            <path d="M12 11h4"/>
            <path d="M12 16h4"/>
            <path d="M8 11h.01"/>
            <path d="M8 16h.01"/>
          </svg>
        </button>
        
        <button id="share-button" 
                title="Share"
                class="btn-icon p-2 rounded-full transition-colors hover:bg-white/10"
                disabled>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
            <polyline points="16 6 12 2 8 6"/>
            <line x1="12" y1="2" x2="12" y2="15"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
  
  <!-- Preview Area -->
  <main class="flex-1 flex flex-col items-center justify-center p-6 bg-surface-dark overflow-auto">
    <div id="preview-container" 
         class="relative bg-surface-dark-3 border-2 border-gray-600 rounded-lg overflow-hidden shadow-2xl"
         style="width: 440px; height: 956px;">
      
      <!-- Placeholder when no URL loaded -->
      <div id="preview-placeholder" class="flex flex-col items-center justify-center h-full text-gray-400 text-center p-10">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-24 h-24 mb-4 opacity-50">
          <circle cx="12" cy="12" r="10"/>
          <line x1="2" y1="12" x2="22" y2="12"/>
          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
        </svg>
        <p>Enter a URL above and click Load to preview</p>
      </div>
      
      <!-- Preview iframe -->
      <iframe 
        id="preview-frame" 
        class="bg-white hidden"
        style="width: 440px; height: 956px;"
        title="Preview"
        sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox">
      </iframe>
    </div>
    
    <!-- Dimension Display -->
    <div id="dimension-display" class="mt-3 text-sm text-gray-400 font-mono">440 × 956</div>
  </main>
  
  <!-- Share Dialog -->
  <div id="share-dialog" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
    <div class="bg-surface-dark-2 rounded-xl p-6 w-full max-w-2xl border border-gray-700 shadow-2xl mx-4">
      <!-- Header -->
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-medium">Share Preview</h2>
        <button id="close-share-dialog" class="btn-icon p-2 rounded-full hover:bg-white/10">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      
      <!-- Share Link Section -->
      <div class="mb-6">
        <label class="block text-sm font-medium mb-2 text-gray-300">Preview Link</label>
        <div class="flex gap-2">
          <input 
            type="text" 
            id="share-link-input"
            readonly
            class="flex-1 px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white text-sm"
          >
          <button 
            id="copy-link-button"
            class="px-4 py-2.5 bg-primary-500 hover:bg-primary-600 text-white rounded-lg font-medium transition-colors whitespace-nowrap">
            Copy Link
          </button>
        </div>
        <p class="text-xs text-gray-400 mt-2">Share this link to open the preview with the same viewport settings</p>
      </div>
      
      <!-- Embed Code Section -->
      <div class="mb-6">
        <label class="block text-sm font-medium mb-2 text-gray-300">Embed Code</label>
        <div class="flex gap-2">
          <textarea 
            id="embed-code-input"
            readonly
            rows="3"
            class="flex-1 px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white text-sm font-mono resize-none"
          ></textarea>
          <button 
            id="copy-embed-button"
            class="px-4 py-2.5 bg-primary-500 hover:bg-primary-600 text-white rounded-lg font-medium transition-colors whitespace-nowrap">
            Copy Code
          </button>
        </div>
        <p class="text-xs text-gray-400 mt-2">Use this iframe code to embed the preview in your documentation</p>
      </div>
      
      <!-- Full-Screen Link -->
      <div class="pt-4 border-t border-gray-700">
        <a 
          id="fullscreen-link"
          href="#"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-2 text-primary-400 hover:text-primary-300 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
            <polyline points="15 3 21 3 21 9"/>
            <line x1="10" y1="14" x2="21" y2="3"/>
          </svg>
          <span>Open Full-Screen Preview</span>
        </a>
      </div>
    </div>
  </div>
  
  <!-- Feedback Dialog -->
  <div id="feedback-dialog" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
    <div class="bg-surface-dark-2 rounded-xl p-6 w-full max-w-2xl border border-gray-700 shadow-2xl mx-4 max-h-[90vh] overflow-y-auto">
      <!-- Header -->
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-medium">Send Feedback</h2>
        <button id="close-feedback-dialog" class="btn-icon p-2 rounded-full hover:bg-white/10">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      
      <!-- Form -->
      <form id="feedback-form" class="space-y-6">
        <div id="feedback-form-content">
          <!-- Full Name -->
          <div>
            <label for="feedback-name" class="block text-sm font-medium mb-2 text-gray-300">
              Full Name <span class="text-red-400">*</span>
            </label>
            <input 
              type="text" 
              id="feedback-name"
              name="name"
              required
              placeholder="Enter your full name"
              class="w-full px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 text-sm focus:border-primary-500 focus:outline-none"
            >
          </div>
          
          <!-- Email -->
          <div>
            <label for="feedback-email" class="block text-sm font-medium mb-2 text-gray-300">
              Email <span class="text-red-400">*</span>
            </label>
            <input 
              type="email" 
              id="feedback-email"
              name="email"
              required
              placeholder="Enter your email"
              class="w-full px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 text-sm focus:border-primary-500 focus:outline-none"
            >
          </div>
          
          <!-- Rating -->
          <div>
            <label class="block text-sm font-medium mb-2 text-gray-300">
              Rating <span class="text-red-400">*</span>
            </label>
            <div id="feedback-rating" class="flex gap-1 items-center">
              <!-- Stars populated by JavaScript -->
            </div>
            <input type="hidden" id="feedback-rating-value" name="rating" required>
            <p class="text-xs text-gray-400 mt-1">Click on a star to rate your experience</p>
          </div>
          
          <!-- Category -->
          <div>
            <label for="feedback-category" class="block text-sm font-medium mb-2 text-gray-300">
              Category <span class="text-red-400">*</span>
            </label>
            <select 
              id="feedback-category"
              name="category"
              required
              class="w-full px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white text-sm focus:border-primary-500 focus:outline-none cursor-pointer"
            >
              <option value="query">General Query</option>
              <option value="request">Feature Request</option>
              <option value="collaboration">Collaboration</option>
              <option value="bug">Bug Report</option>
            </select>
          </div>
          
          <!-- Message -->
          <div>
            <label for="feedback-message" class="block text-sm font-medium mb-2 text-gray-300">
              Message <span class="text-red-400">*</span>
            </label>
            <textarea 
              id="feedback-message"
              name="message"
              required
              rows="5"
              placeholder="Ask us anything or share your thoughts..."
              class="w-full px-4 py-2.5 bg-surface-dark-3 border border-gray-600 rounded-lg text-white placeholder-gray-400 text-sm resize-none focus:border-primary-500 focus:outline-none"
            ></textarea>
          </div>
          
          <!-- Submit Button -->
          <div class="flex gap-3 pt-2">
            <button 
              type="button"
              id="close-feedback-dialog-bottom"
              class="flex-1 px-4 py-2.5 border border-gray-600 hover:bg-surface-dark-3 text-white rounded-lg font-medium transition-colors">
              Cancel
            </button>
            <button 
              type="submit"
              id="submit-feedback-button"
              class="flex-1 px-4 py-2.5 bg-primary-500 hover:bg-primary-600 text-white rounded-lg font-medium transition-colors">
              Submit Feedback
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Theme Script -->
  <script type="module">
    import { initTheme } from './js/theme.js';
    
    // Initialize theme as early as possible
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initTheme);
    } else {
      initTheme();
    }
  </script>
  
  <!-- Application Script -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
